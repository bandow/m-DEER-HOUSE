<!DOCTYPE html>
<html id="html" lang="zh-cmn-Hans">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<meta name="author" content="name, sycbbb@sina.com"/>
<meta name="robots" content="index,follow"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
<meta name="format-detection" content="telephone=no, email=no,adress=no"/>
<meta name="msapplication-tap-highlight" content="no">
<title>我的订单</title>
<link rel="stylesheet" href="styles/dropload.css">
<link rel="stylesheet" href="styles/userOrder.css">
</head>
<body>
<div class="wrapper">
	<header class="header">
		<a onclick="goback();" href="javascript:;"></a>
		<h1>我的订单</h1>
	</header>
	<section class="userOrder">
     <div class="tab">
        <a href="javascript:;" class="item cur">全&nbsp;&nbsp;&nbsp;&nbsp;部</a>
        <a href="javascript:;" class="item">待付款</a>
        <a href="javascript:;" class="item">待入住</a>
    </div>
    <div class="content">
      <div class="lists" style="display:block;">
        <div class="order-list">
          <h2><span>夜阑小蛮腰·珠江帝小蛮腰·珠江帝景倚鸿轩·古色生香</span><a href="orderDetail.html">已入住</a></h2>
          <div class="text-order">
            <div class="img">
              <img src="images/hotelInfo/hote_info1.jpg" alt="">
            </div>
            <div class="text-r">
              <p>9月1日-9月3日 共2晚</p>
              <p>预订人：叶伟</p>
              <p>手机号：13512345678</p>
              <p>金额：￥1982</p>        
            </div>
          </div>
        </div>  
        <div class="order-list">
          <h2><span>夜阑小蛮腰·珠江帝小蛮腰·珠江帝景倚鸿轩·古色生香</span><a href="#">待付款</a></h2>
          <div class="text-order">
            <div class="img">
              <img src="images/hotelInfo/hote_info1.jpg" alt="">
            </div>
            <div class="text-r">
              <p>9月1日-9月3日 共2晚</p>
              <p>预订人：叶伟</p>
              <p>手机号：13512345678</p>
              <p>金额：￥1982</p>
              <div class="btn">
                <a href="javascript:;">取消</a>
                <a href="#">去支付</a>
              </div>        
            </div>
          </div>
        </div>  
        <div class="order-list">
          <h2><span>夜阑小蛮腰·珠江帝小蛮腰·珠江帝景倚鸿轩·古色生香</span><a href="#">待入住</a></h2>
          <div class="text-order">
            <div class="img">
              <img src="images/hotelInfo/hote_info1.jpg" alt="">
            </div>
            <div class="text-r">
              <p>9月1日-9月3日 共2晚</p>
              <p>预订人：叶伟</p>
              <p>手机号：13512345678</p>
              <p>金额：￥1982</p>   
               <div class="btn">
                <a href="javascript:;">取消</a>
                <a href="#">确定入住</a>
              </div>       
            </div>
          </div>
        </div>  
         <div class="order-list">
          <h2><span>夜阑小蛮腰·珠江帝小蛮腰·珠江帝景倚鸿轩·古色生香</span><a href="#">已取消</a></h2>
          <div class="text-order">
            <div class="img">
              <img src="images/hotelInfo/hote_info1.jpg" alt="">
            </div>
            <div class="text-r">
              <p>9月1日-9月3日 共2晚</p>
              <p>预订人：叶伟</p>
              <p>手机号：13512345678</p>
              <p>金额：￥1982</p> 
               <div class="btn">
                <a href="#">再次预订</a>
              </div>       
            </div>
          </div>
        </div> 
      </div>
      <div class="lists">
         <div class="order-list">
          <h2><span>夜阑小蛮腰·珠江帝小蛮腰·珠江帝景倚鸿轩·古色生香</span><a href="#">待付款</a></h2>
          <div class="text-order">
            <div class="img">
              <img src="images/hotelInfo/hote_info1.jpg" alt="">
            </div>
            <div class="text-r">
              <p>9月1日-9月3日 共2晚</p>
              <p>预订人：叶伟</p>
              <p>手机号：13512345678</p>
              <p>金额：￥1982</p>
              <div class="btn">
                <a href="javascript:;">取消</a>
                <a href="#">去支付</a>
              </div>        
            </div>
          </div>
        </div>  
         <div class="order-list">
          <h2><span>夜阑小蛮腰·珠江帝小蛮腰·珠江帝景倚鸿轩·古色生香</span><a href="#">待付款</a></h2>
          <div class="text-order">
            <div class="img">
              <img src="images/hotelInfo/hote_info1.jpg" alt="">
            </div>
            <div class="text-r">
              <p>9月1日-9月3日 共2晚</p>
              <p>预订人：叶伟</p>
              <p>手机号：13512345678</p>
              <p>金额：￥1982</p>
              <div class="btn">
                <a href="javascript:;">取消</a>
                <a href="#">去支付</a>
              </div>        
            </div>
          </div>
        </div>  
         <div class="order-list">
          <h2><span>夜阑小蛮腰·珠江帝小蛮腰·珠江帝景倚鸿轩·古色生香</span><a href="#">待付款</a></h2>
          <div class="text-order">
            <div class="img">
              <img src="images/hotelInfo/hote_info1.jpg" alt="">
            </div>
            <div class="text-r">
              <p>9月1日-9月3日 共2晚</p>
              <p>预订人：叶伟</p>
              <p>手机号：13512345678</p>
              <p>金额：￥1982</p>
              <div class="btn">
                <a href="javascript:;">取消</a>
                <a href="#">去支付</a>
              </div>        
            </div>
          </div>
        </div>  
      </div>
      <div class="lists">
        <div class="order-list">
          <h2><span>夜阑小蛮腰·珠江帝小蛮腰·珠江帝景倚鸿轩·古色生香</span><a href="#">待入住</a></h2>
          <div class="text-order">
            <div class="img">
              <img src="images/hotelInfo/hote_info1.jpg" alt="">
            </div>
            <div class="text-r">
              <p>9月1日-9月3日 共2晚</p>
              <p>预订人：叶伟</p>
              <p>手机号：13512345678</p>
              <p>金额：￥1982</p>   
               <div class="btn">
                <a href="javascript:;">取消</a>
                <a href="#">确定入住</a>
              </div>       
            </div>
          </div>
        </div> 
         <div class="order-list">
          <h2><span>夜阑小蛮腰·珠江帝小蛮腰·珠江帝景倚鸿轩·古色生香</span><a href="#">待入住</a></h2>
          <div class="text-order">
            <div class="img">
              <img src="images/hotelInfo/hote_info1.jpg" alt="">
            </div>
            <div class="text-r">
              <p>9月1日-9月3日 共2晚</p>
              <p>预订人：叶伟</p>
              <p>手机号：13512345678</p>
              <p>金额：￥1982</p>   
               <div class="btn">
                <a href="javascript:;">取消</a>
                <a href="#">确定入住</a>
              </div>       
            </div>
          </div>
        </div> 
         <div class="order-list">
          <h2><span>夜阑小蛮腰·珠江帝小蛮腰·珠江帝景倚鸿轩·古色生香</span><a href="#">待入住</a></h2>
          <div class="text-order">
            <div class="img">
              <img src="images/hotelInfo/hote_info1.jpg" alt="">
            </div>
            <div class="text-r">
              <p>9月1日-9月3日 共2晚</p>
              <p>预订人：叶伟</p>
              <p>手机号：13512345678</p>
              <p>金额：￥1982</p>   
               <div class="btn">
                <a href="javascript:;">取消</a>
                <a href="#">确定入住</a>
              </div>       
            </div>
          </div>
        </div> 
      </div>
    </div>
  </section> 
</div>


<!-- script begin -->
<script src="scripts/zepto.min.js"></script>
<script src="scripts/dropload.min.js"></script>
<script>
$(function(){
    var itemIndex = 0;
    var tab1LoadEnd = false;
    var tab2LoadEnd = false;
    var tab3LoadEnd = false;
    // tab
    $('.tab .item').on('click',function(){
        var $this = $(this);
        itemIndex = $this.index();
        $this.addClass('cur').siblings('.item').removeClass('cur');
        $('.lists').eq(itemIndex).show().siblings('.lists').hide();

        // 如果选中菜单一
        if(itemIndex == '0'){
            // 如果数据没有加载完
            if(!tab1LoadEnd){
                // 解锁
                dropload.unlock();
                dropload.noData(false);
            }else{
                // 锁定
                dropload.lock('down');
                dropload.noData();
            }
        // 如果选中菜单二
        }else if(itemIndex == '1'){
            if(!tab2LoadEnd){
                // 解锁
                dropload.unlock();
                dropload.noData(false);
            }else{
                // 锁定
                dropload.lock('down');
                dropload.noData();
            }
        }else if(itemIndex == '2'){
            if(!tab3LoadEnd){
                // 解锁
                dropload.unlock();
                dropload.noData(false);
            }else{
                // 锁定
                dropload.lock('down');
                dropload.noData();
            }
        }
        // 重置
        dropload.resetload();
    });

    var counter = 0;
    // 每页展示4个
    var num = 4;
    var pageStart = 0,pageEnd = 0;

    // dropload
    var dropload = $('.userOrder').dropload({
        scrollArea : window,
        loadDownFn : function(me){
            // 加载菜单一的数据
            if(itemIndex == '0'){
                $.ajax({
                    type: 'GET',
                    url: 'data/more.json',
                    dataType: 'json',
                    success: function(data){
                        var result = '';
                        counter++;
                        pageEnd = num * counter;
                        pageStart = pageEnd - num;

                        if(pageStart <= data.lists.length){
                            for(var i = pageStart; i < pageEnd; i++){
                                result +=   '<a class="item opacity" href="'+data.lists[i].link+'">'
                                                +'<img src="'+data.lists[i].pic+'" alt="">'
                                                +'<h3>'+data.lists[i].title+'</h3>'
                                                +'<span class="date">'+data.lists[i].date+'</span>'
                                            +'</a>';
                                if((i + 1) >= data.lists.length){
                                    // 数据加载完
                                    tab1LoadEnd = true;
                                    // 锁定
                                    me.lock();
                                    // 无数据
                                    me.noData();
                                    break;
                                }
                            }
                            // 为了测试，延迟1秒加载
                            setTimeout(function(){
                                $('.lists').eq(0).append(result);
                                // 每次数据加载完，必须重置
                                me.resetload();
                            },1000);
                        }
                    },
                    error: function(xhr, type){
                        console.log('Ajax error!');
                        // 即使加载出错，也得重置
                        me.resetload();
                    }
                });
            // 加载菜单二的数据
            }else if(itemIndex == '1'){
                $.ajax({
                    type: 'GET',
                    url: '../public/scripts/json/update.json',
                    dataType: 'json',
                    success: function(data){
                        var result = '';
                        for(var i = 0; i < data.lists.length; i++){
                            result +=   '<a class="item opacity" href="'+data.lists[i].link+'">'
                                            +'<img src="'+data.lists[i].pic+'" alt="">'
                                            +'<h3>'+data.lists[i].title+'</h3>'
                                            +'<span class="date">'+data.lists[i].date+'</span>'
                                        +'</a>';
                        }
                        // 为了测试，延迟1秒加载
                        setTimeout(function(){
                            $('.lists').eq(1).append(result);
                            // 每次数据加载完，必须重置
                            me.resetload();
                        },1000);
                    },
                    error: function(xhr, type){
                        console.log('Ajax error!');
                        // 即使加载出错，也得重置
                        me.resetload();
                    }
                });
            }
        }
    });
});
</script>
<script> 
	//返回上一页
	function goback(){
		window.history.go(-1);
	}
</script>
<!-- script end -->
</body>
</html>